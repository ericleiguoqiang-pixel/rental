import{r as d,c as qt,g as Jt,b as Wt,R as pt}from"./vendor-fa9da516.js";import{S as ge,A as j,_ as B,F as S,C as $,I as M,R as G,a as D,B as k,b as Yt,T as se,m as I,L as Fe,M as Kt,D as Zt,c as Gt,d as Qt,e as Y,f as ne,g as X,h as E,i as W,j as Ve,P as qe,k as oe,l as q,n as U,E as Ce,o as Je,p as me,q as gt,r as vt,s as yt,t as bt,u as Xt,v as ce,w as Ne,x as N,y as er,z as tr,G as rr}from"./antd-b0cf48e4.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(l){if(l.ep)return;l.ep=!0;const s=a(l);fetch(l.href,s)}})();var St={exports:{}},Pe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ar=d,nr=Symbol.for("react.element"),lr=Symbol.for("react.fragment"),sr=Object.prototype.hasOwnProperty,or=ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ir={key:!0,ref:!0,__self:!0,__source:!0};function xt(e,r,a){var n,l={},s=null,o=null;a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),r.ref!==void 0&&(o=r.ref);for(n in r)sr.call(r,n)&&!ir.hasOwnProperty(n)&&(l[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps,r)l[n]===void 0&&(l[n]=r[n]);return{$$typeof:nr,type:e,key:s,ref:o,props:l,_owner:or.current}}Pe.Fragment=lr;Pe.jsx=xt;Pe.jsxs=xt;St.exports=Pe;var We=St.exports;const Z=We.Fragment,t=We.jsx,g=We.jsxs;var je={},Ze=qt;je.createRoot=Ze.createRoot,je.hydrateRoot=Ze.hydrateRoot;var Oe={},wt={exports:{}};(function(e){function r(a){return a&&a.__esModule?a:{default:a}}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(wt);var ke=wt.exports,Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.default=void 0;var cr={items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页",page_size:"页码"};Ee.default=cr;var Te={},ve={},Me={},It={exports:{}},Ct={exports:{}},Pt={exports:{}},Ot={exports:{}};(function(e){function r(a){"@babel/helpers - typeof";return e.exports=r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,r(a)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})(Ot);var kt=Ot.exports,Et={exports:{}};(function(e){var r=kt.default;function a(n,l){if(r(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,l||"default");if(r(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(n)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(Et);var dr=Et.exports;(function(e){var r=kt.default,a=dr;function n(l){var s=a(l,"string");return r(s)=="symbol"?s:s+""}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(Pt);var ur=Pt.exports;(function(e){var r=ur;function a(n,l,s){return(l=r(l))in n?Object.defineProperty(n,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[l]=s,n}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports})(Ct);var hr=Ct.exports;(function(e){var r=hr;function a(l,s){var o=Object.keys(l);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(l);s&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(l,h).enumerable})),o.push.apply(o,i)}return o}function n(l){for(var s=1;s<arguments.length;s++){var o=arguments[s]!=null?arguments[s]:{};s%2?a(Object(o),!0).forEach(function(i){r(l,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(i){Object.defineProperty(l,i,Object.getOwnPropertyDescriptor(o,i))})}return l}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(It);var mr=It.exports,Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.commonLocale=void 0;Ae.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var fr=ke.default;Object.defineProperty(Me,"__esModule",{value:!0});Me.default=void 0;var Ge=fr(mr),pr=Ae,gr=(0,Ge.default)((0,Ge.default)({},pr.commonLocale),{},{locale:"zh_CN",today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",week:"周",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪",yearFormat:"YYYY年",cellDateFormat:"D",monthBeforeYear:!1});Me.default=gr;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.default=void 0;const vr={placeholder:"请选择时间",rangePlaceholder:["开始时间","结束时间"]};ye.default=vr;var Tt=ke.default;Object.defineProperty(ve,"__esModule",{value:!0});ve.default=void 0;var yr=Tt(Me),br=Tt(ye);const Mt={lang:Object.assign({placeholder:"请选择日期",yearPlaceholder:"请选择年份",quarterPlaceholder:"请选择季度",monthPlaceholder:"请选择月份",weekPlaceholder:"请选择周",rangePlaceholder:["开始日期","结束日期"],rangeYearPlaceholder:["开始年份","结束年份"],rangeMonthPlaceholder:["开始月份","结束月份"],rangeQuarterPlaceholder:["开始季度","结束季度"],rangeWeekPlaceholder:["开始周","结束周"]},yr.default),timePickerLocale:Object.assign({},br.default)};Mt.lang.ok="确定";ve.default=Mt;var Sr=ke.default;Object.defineProperty(Te,"__esModule",{value:!0});Te.default=void 0;var xr=Sr(ve);Te.default=xr.default;var $e=ke.default;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.default=void 0;var wr=$e(Ee),Ir=$e(Te),Cr=$e(ve),Pr=$e(ye);const F="${label}不是一个有效的${type}",Or={locale:"zh-cn",Pagination:wr.default,DatePicker:Cr.default,TimePicker:Pr.default,Calendar:Ir.default,global:{placeholder:"请选择",close:"关闭"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",filterEmptyText:"无筛选项",filterCheckAll:"全选",filterSearchPlaceholder:"在筛选项中搜索",emptyText:"暂无数据",selectAll:"全选当页",selectInvert:"反选当页",selectNone:"清空所有",selectionAll:"全选所有",sortTitle:"排序",expand:"展开行",collapse:"关闭行",triggerDesc:"点击降序",triggerAsc:"点击升序",cancelSort:"取消排序"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Tour:{Next:"下一步",Previous:"上一步",Finish:"结束导览"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{titles:["",""],searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项",remove:"删除",selectCurrent:"全选当页",removeCurrent:"删除当页",selectAll:"全选所有",deselectAll:"取消全选",removeAll:"删除全部",selectInvert:"反选当页"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开",collapse:"收起"},Form:{optional:"（可选）",defaultValidateMessages:{default:"字段验证错误${label}",required:"请输入${label}",enum:"${label}必须是其中一个[${enum}]",whitespace:"${label}不能为空字符",date:{format:"${label}日期格式无效",parse:"${label}不能转换为日期",invalid:"${label}是一个无效日期"},types:{string:F,method:F,array:F,object:F,number:F,date:F,boolean:F,integer:F,float:F,regexp:F,email:F,url:F,hex:F},string:{len:"${label}须为${len}个字符",min:"${label}最少${min}个字符",max:"${label}最多${max}个字符",range:"${label}须在${min}-${max}字符之间"},number:{len:"${label}必须等于${len}",min:"${label}最小值为${min}",max:"${label}最大值为${max}",range:"${label}须在${min}-${max}之间"},array:{len:"须为${len}个${label}",min:"最少${min}个${label}",max:"最多${max}个${label}",range:"${label}数量须在${min}-${max}之间"},pattern:{mismatch:"${label}与模式不匹配${pattern}"}}},Image:{preview:"预览"},QRCode:{expired:"二维码过期",refresh:"点击刷新",scanned:"已扫描"},ColorPicker:{presetEmpty:"暂无",transparent:"无色",singleColor:"单色",gradientColor:"渐变色"}};Oe.default=Or;var kr=Oe;const Er=Jt(kr);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},fe.apply(this,arguments)}var K;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(K||(K={}));const Qe="popstate";function Tr(e){e===void 0&&(e={});function r(n,l){let{pathname:s,search:o,hash:i}=n.location;return Be("",{pathname:s,search:o,hash:i},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function a(n,l){return typeof l=="string"?l:$t(l)}return Ar(r,a,null,e)}function _(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function At(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Mr(){return Math.random().toString(36).substr(2,8)}function Xe(e,r){return{usr:e.state,key:e.key,idx:r}}function Be(e,r,a,n){return a===void 0&&(a=null),fe({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?ie(r):r,{state:a,key:r&&r.key||n||Mr()})}function $t(e){let{pathname:r="/",search:a="",hash:n=""}=e;return a&&a!=="?"&&(r+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function ie(e){let r={};if(e){let a=e.indexOf("#");a>=0&&(r.hash=e.substr(a),e=e.substr(0,a));let n=e.indexOf("?");n>=0&&(r.search=e.substr(n),e=e.substr(0,n)),e&&(r.pathname=e)}return r}function Ar(e,r,a,n){n===void 0&&(n={});let{window:l=document.defaultView,v5Compat:s=!1}=n,o=l.history,i=K.Pop,h=null,f=p();f==null&&(f=0,o.replaceState(fe({},o.state,{idx:f}),""));function p(){return(o.state||{idx:null}).idx}function c(){i=K.Pop;let x=p(),C=x==null?null:x-f;f=x,h&&h({action:i,location:b.location,delta:C})}function u(x,C){i=K.Push;let A=Be(b.location,x,C);a&&a(A,x),f=p()+1;let R=Xe(A,f),H=b.createHref(A);try{o.pushState(R,"",H)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;l.location.assign(H)}s&&h&&h({action:i,location:b.location,delta:1})}function m(x,C){i=K.Replace;let A=Be(b.location,x,C);a&&a(A,x),f=p();let R=Xe(A,f),H=b.createHref(A);o.replaceState(R,"",H),s&&h&&h({action:i,location:b.location,delta:0})}function v(x){let C=l.location.origin!=="null"?l.location.origin:l.location.href,A=typeof x=="string"?x:$t(x);return A=A.replace(/ $/,"%20"),_(C,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,C)}let b={get action(){return i},get location(){return e(l,o)},listen(x){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(Qe,c),h=x,()=>{l.removeEventListener(Qe,c),h=null}},createHref(x){return r(l,x)},createURL:v,encodeLocation(x){let C=v(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:u,replace:m,go(x){return o.go(x)}};return b}var et;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(et||(et={}));function $r(e,r,a){return a===void 0&&(a="/"),Rr(e,r,a,!1)}function Rr(e,r,a,n){let l=typeof r=="string"?ie(r):r,s=_t(l.pathname||"/",a);if(s==null)return null;let o=Rt(e);Nr(o);let i=null;for(let h=0;i==null&&h<o.length;++h){let f=qr(s);i=Hr(o[h],f,n)}return i}function Rt(e,r,a,n){r===void 0&&(r=[]),a===void 0&&(a=[]),n===void 0&&(n="");let l=(s,o,i)=>{let h={relativePath:i===void 0?s.path||"":i,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};h.relativePath.startsWith("/")&&(_(h.relativePath.startsWith(n),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(n.length));let f=Q([n,h.relativePath]),p=a.concat(h);s.children&&s.children.length>0&&(_(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Rt(s.children,r,p,f)),!(s.path==null&&!s.index)&&r.push({path:f,score:jr(f,s.index),routesMeta:p})};return e.forEach((s,o)=>{var i;if(s.path===""||!((i=s.path)!=null&&i.includes("?")))l(s,o);else for(let h of Nt(s.path))l(s,o,h)}),r}function Nt(e){let r=e.split("/");if(r.length===0)return[];let[a,...n]=r,l=a.endsWith("?"),s=a.replace(/\?$/,"");if(n.length===0)return l?[s,""]:[s];let o=Nt(n.join("/")),i=[];return i.push(...o.map(h=>h===""?s:[s,h].join("/"))),l&&i.push(...o),i.map(h=>e.startsWith("/")&&h===""?"/":h)}function Nr(e){e.sort((r,a)=>r.score!==a.score?a.score-r.score:Br(r.routesMeta.map(n=>n.childrenIndex),a.routesMeta.map(n=>n.childrenIndex)))}const _r=/^:[\w-]+$/,Dr=3,zr=2,Lr=1,Fr=10,Vr=-2,tt=e=>e==="*";function jr(e,r){let a=e.split("/"),n=a.length;return a.some(tt)&&(n+=Vr),r&&(n+=zr),a.filter(l=>!tt(l)).reduce((l,s)=>l+(_r.test(s)?Dr:s===""?Lr:Fr),n)}function Br(e,r){return e.length===r.length&&e.slice(0,-1).every((n,l)=>n===r[l])?e[e.length-1]-r[r.length-1]:0}function Hr(e,r,a){a===void 0&&(a=!1);let{routesMeta:n}=e,l={},s="/",o=[];for(let i=0;i<n.length;++i){let h=n[i],f=i===n.length-1,p=s==="/"?r:r.slice(s.length)||"/",c=rt({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),u=h.route;if(!c&&f&&a&&!n[n.length-1].route.index&&(c=rt({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!c)return null;Object.assign(l,c.params),o.push({params:l,pathname:Q([s,c.pathname]),pathnameBase:Kr(Q([s,c.pathnameBase])),route:u}),c.pathnameBase!=="/"&&(s=Q([s,c.pathnameBase]))}return o}function rt(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,n]=Ur(e.path,e.caseSensitive,e.end),l=r.match(a);if(!l)return null;let s=l[0],o=s.replace(/(.)\/+$/,"$1"),i=l.slice(1);return{params:n.reduce((f,p,c)=>{let{paramName:u,isOptional:m}=p;if(u==="*"){let b=i[c]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const v=i[c];return m&&!v?f[u]=void 0:f[u]=(v||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:o,pattern:e}}function Ur(e,r,a){r===void 0&&(r=!1),a===void 0&&(a=!0),At(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,h)=>(n.push({paramName:i,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,r?void 0:"i"),n]}function qr(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return At(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function _t(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let a=r.endsWith("/")?r.length-1:r.length,n=e.charAt(a);return n&&n!=="/"?null:e.slice(a)||"/"}function Jr(e,r){r===void 0&&(r="/");let{pathname:a,search:n="",hash:l=""}=typeof e=="string"?ie(e):e;return{pathname:a?a.startsWith("/")?a:Wr(a,r):r,search:Zr(n),hash:Gr(l)}}function Wr(e,r){let a=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function _e(e,r,a,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Yr(e){return e.filter((r,a)=>a===0||r.route.path&&r.route.path.length>0)}function Dt(e,r){let a=Yr(e);return r?a.map((n,l)=>l===a.length-1?n.pathname:n.pathnameBase):a.map(n=>n.pathnameBase)}function zt(e,r,a,n){n===void 0&&(n=!1);let l;typeof e=="string"?l=ie(e):(l=fe({},e),_(!l.pathname||!l.pathname.includes("?"),_e("?","pathname","search",l)),_(!l.pathname||!l.pathname.includes("#"),_e("#","pathname","hash",l)),_(!l.search||!l.search.includes("#"),_e("#","search","hash",l)));let s=e===""||l.pathname==="",o=s?"/":l.pathname,i;if(o==null)i=a;else{let c=r.length-1;if(!n&&o.startsWith("..")){let u=o.split("/");for(;u[0]==="..";)u.shift(),c-=1;l.pathname=u.join("/")}i=c>=0?r[c]:"/"}let h=Jr(l,i),f=o&&o!=="/"&&o.endsWith("/"),p=(s||o===".")&&a.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}const Q=e=>e.join("/").replace(/\/\/+/g,"/"),Kr=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zr=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gr=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Qr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Lt=["post","put","patch","delete"];new Set(Lt);const Xr=["get",...Lt];new Set(Xr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},pe.apply(this,arguments)}const Ye=d.createContext(null),ea=d.createContext(null),be=d.createContext(null),Re=d.createContext(null),ee=d.createContext({outlet:null,matches:[],isDataRoute:!1}),Ft=d.createContext(null);function Se(){return d.useContext(Re)!=null}function te(){return Se()||_(!1),d.useContext(Re).location}function Vt(e){d.useContext(be).static||d.useLayoutEffect(e)}function xe(){let{isDataRoute:e}=d.useContext(ee);return e?ma():ta()}function ta(){Se()||_(!1);let e=d.useContext(Ye),{basename:r,future:a,navigator:n}=d.useContext(be),{matches:l}=d.useContext(ee),{pathname:s}=te(),o=JSON.stringify(Dt(l,a.v7_relativeSplatPath)),i=d.useRef(!1);return Vt(()=>{i.current=!0}),d.useCallback(function(f,p){if(p===void 0&&(p={}),!i.current)return;if(typeof f=="number"){n.go(f);return}let c=zt(f,JSON.parse(o),s,p.relative==="path");e==null&&r!=="/"&&(c.pathname=c.pathname==="/"?r:Q([r,c.pathname])),(p.replace?n.replace:n.push)(c,p.state,p)},[r,n,o,s,e])}function ra(e,r){return aa(e,r)}function aa(e,r,a,n){Se()||_(!1);let{navigator:l}=d.useContext(be),{matches:s}=d.useContext(ee),o=s[s.length-1],i=o?o.params:{};o&&o.pathname;let h=o?o.pathnameBase:"/";o&&o.route;let f=te(),p;if(r){var c;let x=typeof r=="string"?ie(r):r;h==="/"||(c=x.pathname)!=null&&c.startsWith(h)||_(!1),p=x}else p=f;let u=p.pathname||"/",m=u;if(h!=="/"){let x=h.replace(/^\//,"").split("/");m="/"+u.replace(/^\//,"").split("/").slice(x.length).join("/")}let v=$r(e,{pathname:m}),b=ia(v&&v.map(x=>Object.assign({},x,{params:Object.assign({},i,x.params),pathname:Q([h,l.encodeLocation?l.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Q([h,l.encodeLocation?l.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,a,n);return r&&b?d.createElement(Re.Provider,{value:{location:pe({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:K.Pop}},b):b}function na(){let e=ha(),r=Qr(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return d.createElement(d.Fragment,null,d.createElement("h2",null,"Unexpected Application Error!"),d.createElement("h3",{style:{fontStyle:"italic"}},r),a?d.createElement("pre",{style:l},a):null,s)}const la=d.createElement(na,null);class sa extends d.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,a){return a.location!==r.location||a.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:a.error,location:a.location,revalidation:r.revalidation||a.revalidation}}componentDidCatch(r,a){console.error("React Router caught the following error during render",r,a)}render(){return this.state.error!==void 0?d.createElement(ee.Provider,{value:this.props.routeContext},d.createElement(Ft.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oa(e){let{routeContext:r,match:a,children:n}=e,l=d.useContext(Ye);return l&&l.static&&l.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=a.route.id),d.createElement(ee.Provider,{value:r},n)}function ia(e,r,a,n){var l;if(r===void 0&&(r=[]),a===void 0&&(a=null),n===void 0&&(n=null),e==null){var s;if(!a)return null;if(a.errors)e=a.matches;else if((s=n)!=null&&s.v7_partialHydration&&r.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let o=e,i=(l=a)==null?void 0:l.errors;if(i!=null){let p=o.findIndex(c=>c.route.id&&(i==null?void 0:i[c.route.id])!==void 0);p>=0||_(!1),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,f=-1;if(a&&n&&n.v7_partialHydration)for(let p=0;p<o.length;p++){let c=o[p];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(f=p),c.route.id){let{loaderData:u,errors:m}=a,v=c.route.loader&&u[c.route.id]===void 0&&(!m||m[c.route.id]===void 0);if(c.route.lazy||v){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((p,c,u)=>{let m,v=!1,b=null,x=null;a&&(m=i&&c.route.id?i[c.route.id]:void 0,b=c.route.errorElement||la,h&&(f<0&&u===0?(fa("route-fallback",!1),v=!0,x=null):f===u&&(v=!0,x=c.route.hydrateFallbackElement||null)));let C=r.concat(o.slice(0,u+1)),A=()=>{let R;return m?R=b:v?R=x:c.route.Component?R=d.createElement(c.route.Component,null):c.route.element?R=c.route.element:R=p,d.createElement(oa,{match:c,routeContext:{outlet:p,matches:C,isDataRoute:a!=null},children:R})};return a&&(c.route.ErrorBoundary||c.route.errorElement||u===0)?d.createElement(sa,{location:a.location,revalidation:a.revalidation,component:b,error:m,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):A()},null)}var jt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(jt||{}),Ie=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ie||{});function ca(e){let r=d.useContext(Ye);return r||_(!1),r}function da(e){let r=d.useContext(ea);return r||_(!1),r}function ua(e){let r=d.useContext(ee);return r||_(!1),r}function Bt(e){let r=ua(),a=r.matches[r.matches.length-1];return a.route.id||_(!1),a.route.id}function ha(){var e;let r=d.useContext(Ft),a=da(Ie.UseRouteError),n=Bt(Ie.UseRouteError);return r!==void 0?r:(e=a.errors)==null?void 0:e[n]}function ma(){let{router:e}=ca(jt.UseNavigateStable),r=Bt(Ie.UseNavigateStable),a=d.useRef(!1);return Vt(()=>{a.current=!0}),d.useCallback(function(l,s){s===void 0&&(s={}),a.current&&(typeof l=="number"?e.navigate(l):e.navigate(l,pe({fromRouteId:r},s)))},[e,r])}const at={};function fa(e,r,a){!r&&!at[e]&&(at[e]=!0)}function pa(e,r){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!r||r.v7_relativeSplatPath),r&&(r.v7_fetcherPersist,r.v7_normalizeFormMethod,r.v7_partialHydration,r.v7_skipActionErrorRevalidation)}function Ht(e){let{to:r,replace:a,state:n,relative:l}=e;Se()||_(!1);let{future:s,static:o}=d.useContext(be),{matches:i}=d.useContext(ee),{pathname:h}=te(),f=xe(),p=zt(r,Dt(i,s.v7_relativeSplatPath),h,l==="path"),c=JSON.stringify(p);return d.useEffect(()=>f(JSON.parse(c),{replace:a,state:n,relative:l}),[f,c,l,a,n]),null}function V(e){_(!1)}function ga(e){let{basename:r="/",children:a=null,location:n,navigationType:l=K.Pop,navigator:s,static:o=!1,future:i}=e;Se()&&_(!1);let h=r.replace(/^\/*/,"/"),f=d.useMemo(()=>({basename:h,navigator:s,static:o,future:pe({v7_relativeSplatPath:!1},i)}),[h,i,s,o]);typeof n=="string"&&(n=ie(n));let{pathname:p="/",search:c="",hash:u="",state:m=null,key:v="default"}=n,b=d.useMemo(()=>{let x=_t(p,h);return x==null?null:{location:{pathname:x,search:c,hash:u,state:m,key:v},navigationType:l}},[h,p,c,u,m,v,l]);return b==null?null:d.createElement(be.Provider,{value:f},d.createElement(Re.Provider,{children:a,value:b}))}function va(e){let{children:r,location:a}=e;return ra(He(r),a)}new Promise(()=>{});function He(e,r){r===void 0&&(r=[]);let a=[];return d.Children.forEach(e,(n,l)=>{if(!d.isValidElement(n))return;let s=[...r,l];if(n.type===d.Fragment){a.push.apply(a,He(n.props.children,s));return}n.type!==V&&_(!1),!n.props.index||!n.props.children||_(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=He(n.props.children,s)),a.push(o)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ya="6";try{window.__reactRouterVersion=ya}catch{}const ba="startTransition",nt=Wt[ba];function Sa(e){let{basename:r,children:a,future:n,window:l}=e,s=d.useRef();s.current==null&&(s.current=Tr({window:l,v5Compat:!0}));let o=s.current,[i,h]=d.useState({action:o.action,location:o.location}),{v7_startTransition:f}=n||{},p=d.useCallback(c=>{f&&nt?nt(()=>h(c)):h(c)},[h,f]);return d.useLayoutEffect(()=>o.listen(p),[o,p]),d.useEffect(()=>pa(n),[n]),d.createElement(ga,{basename:r,children:a,location:i.location,navigationType:i.action,navigator:o,future:n})}var lt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lt||(lt={}));var st;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(st||(st={}));const de=({children:e})=>{const[r,a]=d.useState(null),[n,l]=d.useState(!0),s=te();d.useEffect(()=>{o()},[]);const o=async()=>{try{const i=localStorage.getItem("token"),h=localStorage.getItem("userInfo");if(console.log("AuthGuard 检查认证状态:",{hasToken:!!i,hasUserInfo:!!h}),!i||!h){console.log("缺少 token 或 userInfo，设置为未认证"),a(!1),l(!1);return}try{const f=await fetch("/api/auth/verify",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});f.ok?(console.log("Token 验证成功"),a(!0)):(console.log("Token 验证失败，状态码:",f.status),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("refreshToken"),a(!1))}catch(f){console.warn("Token 验证接口调用失败:",f),i&&i.length>10&&!i.startsWith("undefined")?(console.log("后端服务不可用，但本地有有效token，允许访问"),a(!0)):(console.log("token无效或后端服务不可用，设置为未认证"),a(!1))}}catch(i){console.error("认证检查失败:",i),a(!1)}finally{l(!1)}};return n?g("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column"},children:[t(ge,{size:"large"}),t("p",{style:{marginTop:16,color:"#666"},children:"正在验证身份..."})]}):r?t(Z,{children:e}):t(Ht,{to:"/login",state:{from:s},replace:!0})};var xa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};const wa=xa;var Ia=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:wa}))},Ca=d.forwardRef(Ia);const ot=Ca;var Pa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"};const Oa=Pa;var ka=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:Oa}))},Ea=d.forwardRef(ka);const Ta=Ea;var Ma={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M380 704h264c4.4 0 8-3.6 8-8v-84c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v36H428v-36c0-4.4-3.6-8-8-8h-40c-4.4 0-8 3.6-8 8v84c0 4.4 3.6 8 8 8zm340-123a40 40 0 1080 0 40 40 0 10-80 0zm239-167.6L935.3 372a8 8 0 00-10.9-2.9l-50.7 29.6-78.3-216.2a63.9 63.9 0 00-60.9-44.4H301.2c-34.7 0-65.5 22.4-76.2 55.5l-74.6 205.2-50.8-29.6a8 8 0 00-10.9 2.9L65 413.4c-2.2 3.8-.9 8.6 2.9 10.8l60.4 35.2-14.5 40c-1.2 3.2-1.8 6.6-1.8 10v348.2c0 15.7 11.8 28.4 26.3 28.4h67.6c12.3 0 23-9.3 25.6-22.3l7.7-37.7h545.6l7.7 37.7c2.7 13 13.3 22.3 25.6 22.3h67.6c14.5 0 26.3-12.7 26.3-28.4V509.4c0-3.4-.6-6.8-1.8-10l-14.5-40 60.3-35.2a8 8 0 003-10.8zM840 517v237H184V517l15.6-43h624.8l15.6 43zM292.7 218.1l.5-1.3.4-1.3c1.1-3.3 4.1-5.5 7.6-5.5h427.6l75.4 208H220l72.7-199.9zM224 581a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"car",theme:"outlined"};const Aa=Ma;var $a=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:Aa}))},Ra=d.forwardRef($a);const Na=Ra;var _a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"};const Da=_a;var za=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:Da}))},La=d.forwardRef(za);const Fa=La;var Va={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 385.6a446.7 446.7 0 00-96-142.4 446.7 446.7 0 00-142.4-96C631.1 123.8 572.5 112 512 112s-119.1 11.8-174.4 35.2a446.7 446.7 0 00-142.4 96 446.7 446.7 0 00-96 142.4C75.8 440.9 64 499.5 64 560c0 132.7 58.3 257.7 159.9 343.1l1.7 1.4c5.8 4.8 13.1 7.5 20.6 7.5h531.7c7.5 0 14.8-2.7 20.6-7.5l1.7-1.4C901.7 817.7 960 692.7 960 560c0-60.5-11.9-119.1-35.2-174.4zM761.4 836H262.6A371.12 371.12 0 01140 560c0-99.4 38.7-192.8 109-263 70.3-70.3 163.7-109 263-109 99.4 0 192.8 38.7 263 109 70.3 70.3 109 163.7 109 263 0 105.6-44.5 205.5-122.6 276zM623.5 421.5a8.03 8.03 0 00-11.3 0L527.7 506c-18.7-5-39.4-.2-54.1 14.5a55.95 55.95 0 000 79.2 55.95 55.95 0 0079.2 0 55.87 55.87 0 0014.5-54.1l84.5-84.5c3.1-3.1 3.1-8.2 0-11.3l-28.3-28.3zM490 320h44c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8h-44c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8zm260 218v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8h-80c-4.4 0-8 3.6-8 8zm12.7-197.2l-31.1-31.1a8.03 8.03 0 00-11.3 0l-56.6 56.6a8.03 8.03 0 000 11.3l31.1 31.1c3.1 3.1 8.2 3.1 11.3 0l56.6-56.6c3.1-3.1 3.1-8.2 0-11.3zm-458.6-31.1a8.03 8.03 0 00-11.3 0l-31.1 31.1a8.03 8.03 0 000 11.3l56.6 56.6c3.1 3.1 8.2 3.1 11.3 0l31.1-31.1c3.1-3.1 3.1-8.2 0-11.3l-56.6-56.6zM262 530h-80c-4.4 0-8 3.6-8 8v44c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8v-44c0-4.4-3.6-8-8-8z"}}]},name:"dashboard",theme:"outlined"};const ja=Va;var Ba=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:ja}))},Ha=d.forwardRef(Ba);const Ua=Ha;var qa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};const Ja=qa;var Wa=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:Ja}))},Ya=d.forwardRef(Wa);const Ka=Ya;var Za={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"};const Ga=Za;var Qa=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:Ga}))},Xa=d.forwardRef(Qa);const en=Xa;var tn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};const rn=tn;var an=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:rn}))},nn=d.forwardRef(an);const ln=nn;var sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"};const on=sn;var cn=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:on}))},dn=d.forwardRef(cn);const un=dn;var hn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};const mn=hn;var fn=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:mn}))},pn=d.forwardRef(fn);const gn=pn;var vn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M882 272.1V144c0-17.7-14.3-32-32-32H174c-17.7 0-32 14.3-32 32v128.1c-16.7 1-30 14.9-30 31.9v131.7a177 177 0 0014.4 70.4c4.3 10.2 9.6 19.8 15.6 28.9v345c0 17.6 14.3 32 32 32h676c17.7 0 32-14.3 32-32V535a175 175 0 0015.6-28.9c9.5-22.3 14.4-46 14.4-70.4V304c0-17-13.3-30.9-30-31.9zM214 184h596v88H214v-88zm362 656.1H448V736h128v104.1zm234 0H640V704c0-17.7-14.3-32-32-32H416c-17.7 0-32 14.3-32 32v136.1H214V597.9c2.9 1.4 5.9 2.8 9 4 22.3 9.4 46 14.1 70.4 14.1s48-4.7 70.4-14.1c13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 13.8-5.8 26.8-13.2 38.7-22.1.2-.1.4-.1.6 0a180.4 180.4 0 0038.7 22.1c22.3 9.4 46 14.1 70.4 14.1 24.4 0 48-4.7 70.4-14.1 3-1.3 6-2.6 9-4v242.2zm30-404.4c0 59.8-49 108.3-109.3 108.3-40.8 0-76.4-22.1-95.2-54.9-2.9-5-8.1-8.1-13.9-8.1h-.6c-5.7 0-11 3.1-13.9 8.1A109.24 109.24 0 01512 544c-40.7 0-76.2-22-95-54.7-3-5.1-8.4-8.3-14.3-8.3s-11.4 3.2-14.3 8.3a109.63 109.63 0 01-95.1 54.7C233 544 184 495.5 184 435.7v-91.2c0-.3.2-.5.5-.5h655c.3 0 .5.2.5.5v91.2z"}}]},name:"shop",theme:"outlined"};const yn=vn;var bn=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:yn}))},Sn=d.forwardRef(bn);const xn=Sn;var wn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"};const In=wn;var Cn=function(r,a){return d.createElement(j,B({},r,{ref:a,icon:In}))},Pn=d.forwardRef(Cn);const Ue=Pn,On="/api",T=async(e,r={})=>{const a=localStorage.getItem("token"),n=localStorage.getItem("tenantId")||"1",l={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`},"X-Tenant-Id":n,...r.headers},...r};try{const s=await fetch(`${On}${e}`,l);if(!s.ok)throw s.status===401?(localStorage.removeItem("token"),window.location.href="/login",new Error("身份验证失效，请重新登录")):new Error(`请求失败: ${s.status}`);return await s.json()}catch(s){throw console.error("API request failed:",s),s}},ue={getStores:()=>T("/stores?current=1&size=100"),createStore:e=>T("/stores",{method:"POST",body:JSON.stringify(e)}),updateStore:(e,r)=>T(`/stores/${e}`,{method:"PUT",body:JSON.stringify(r)}),deleteStore:e=>T(`/stores/${e}`,{method:"DELETE"})},he={getVehicles:()=>T("/vehicles?current=1&size=100"),createVehicle:e=>T("/vehicles",{method:"POST",body:JSON.stringify(e)}),updateVehicle:(e,r)=>T(`/vehicles/${e}`,{method:"PUT",body:JSON.stringify(r)}),deleteVehicle:e=>T(`/vehicles/${e}`,{method:"DELETE"})},De={getOrders:()=>T("/orders"),getOrderDetail:e=>T(`/orders/${e}`),updateOrderStatus:(e,r)=>T(`/orders/${e}/status`,{method:"PUT",body:JSON.stringify({status:r})})},it={login:e=>T("/auth/login",{method:"POST",body:JSON.stringify(e)}),refreshToken:e=>T("/auth/refresh",{method:"POST",body:JSON.stringify({refreshToken:e})}),getCaptcha:()=>T("/auth/captcha"),logout:e=>T("/auth/logout",{method:"POST",headers:{Authorization:`Bearer ${e}`}})},kn={getAllCarModels:()=>T("/car-models/all"),getCarModels:e=>{const r=e?new URLSearchParams(e).toString():"";return T(`/car-models${r?"?"+r:""}`)},getCarModelsByBrand:e=>T(`/car-models/brand/${e}`),getAllBrands:()=>T("/car-models/brands"),getSeriesByBrand:e=>T(`/car-models/series?brand=${e}`)},we={listByStoreId:e=>T(`/service-area/list?storeId=${e}`),pageServiceAreas:e=>{const r=new URLSearchParams(e).toString();return T(`/service-area/page${r?"?"+r:""}`)},create:e=>T("/service-area/save",{method:"POST",body:JSON.stringify(e)}),update:e=>T("/service-area/update",{method:"PUT",body:JSON.stringify(e)}),delete:e=>T(`/service-area/delete/${e}`,{method:"DELETE"})},{Title:ct}=se,En=()=>{var u,m;const e=xe(),r=te(),[a]=S.useForm(),[n,l]=d.useState(!1),[s,o]=d.useState(""),[i,h]=d.useState(""),f=((m=(u=r.state)==null?void 0:u.from)==null?void 0:m.pathname)||"/dashboard",p=async()=>{try{const v=await it.getCaptcha(),[b,x]=v.data.split(":");o(b),h(x)}catch(v){console.error("获取验证码失败:",v);const b="captcha_"+Date.now(),x=Math.random().toString(36).substring(2,6).toUpperCase();o(b),h(x)}};return d.useEffect(()=>{const v=localStorage.getItem("token"),b=localStorage.getItem("userInfo");if(v&&b){console.log("用户已登录，跳转到目标页面"),e(f,{replace:!0});return}p()},[]),t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:g($,{style:{width:"100%",maxWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",borderRadius:12},children:[t(ct,{level:2,style:{textAlign:"center",marginBottom:8},children:"租车SaaS系统"}),t(ct,{level:4,style:{textAlign:"center",marginBottom:32,color:"#666"},children:"商户端管理平台"}),g(S,{form:a,name:"login",onFinish:async v=>{l(!0);try{console.log("登录信息:",v);const b=await it.login({username:v.username,password:v.password,captcha:v.captcha,captchaKey:s});b.code===200?(localStorage.setItem("token",b.data.accessToken||b.data.token),localStorage.setItem("refreshToken",b.data.refreshToken),localStorage.setItem("userInfo",JSON.stringify(b.data.userInfo)),I.success("登录成功！"),e(f,{replace:!0})):(I.error(b.message||"登录失败"),p(),a.setFieldValue("captcha",""))}catch(b){console.error("登录失败:",b),b.message.includes("Failed to fetch")||b.message.includes("Network Error")?(I.warning("后端服务暂时不可用，使用模拟登录"),localStorage.setItem("token","mock_token_"+Date.now()),localStorage.setItem("userInfo",JSON.stringify({userId:1,username:v.username,employeeName:"模拟管理员",roleType:1,roleTypeDesc:"超级管理员"})),I.success("登录成功！"),e(f,{replace:!0})):(I.error("登录失败，请检查用户名和密码"),p(),a.setFieldValue("captcha",""))}finally{l(!1)}},autoComplete:"off",size:"large",children:[t(S.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"},{min:4,message:"用户名至少4个字符"}],children:t(M,{prefix:t(Ue,{}),placeholder:"用户名/手机号"})}),t(S.Item,{name:"password",rules:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少6个字符"}],children:t(M.Password,{prefix:t(Ka,{}),placeholder:"密码"})}),t(S.Item,{name:"captcha",rules:[{required:!0,message:"请输入验证码"}],children:g(G,{gutter:8,children:[t(D,{span:14,children:t(M,{placeholder:"验证码"})}),t(D,{span:10,children:t(k,{onClick:p,icon:t(Yt,{}),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:i||"获取验证码"})})]})}),t(S.Item,{children:t(k,{type:"primary",htmlType:"submit",loading:n,block:!0,children:"登录"})})]}),t("div",{style:{textAlign:"center",marginTop:24},children:t(k,{type:"link",onClick:()=>e("/register"),children:"没有账户？立即注册"})})]})})},{Header:Tn,Sider:Mn,Content:An}=Fe,{Title:dt}=se,le=({children:e,title:r="仪表盘"})=>{const a=xe(),n=te(),[l,s]=d.useState(!1),o=()=>{const c=n.pathname;return c==="/"||c==="/dashboard"?["dashboard"]:c==="/stores"?["stores"]:c==="/vehicles"?["vehicles"]:c==="/orders"?["orders"]:c==="/merchant-audit"?["merchant-audit"]:["dashboard"]},i=({key:c})=>{switch(c){case"dashboard":a("/");break;case"stores":a("/stores");break;case"vehicles":a("/vehicles");break;case"orders":a("/orders");break;case"merchant-audit":a("/merchant-audit");break}},h=[{key:"dashboard",icon:t(Ua,{}),label:"仪表盘"},{key:"stores",icon:t(xn,{}),label:"门店管理"},{key:"vehicles",icon:t(Na,{}),label:"车辆管理"},{key:"orders",icon:t(Qt,{}),label:"订单管理"},{key:"merchant-audit",icon:t(Ta,{}),label:"商户审核"}],p=[{key:"profile",icon:t(Ue,{}),label:"个人信息"},{key:"settings",icon:t(gn,{}),label:"设置"},{type:"divider"},{key:"logout",icon:t(en,{}),label:"退出登录",onClick:()=>{localStorage.removeItem("token"),a("/login")}}];return g(Fe,{style:{minHeight:"100vh"},children:[g(Mn,{trigger:null,collapsible:!0,collapsed:l,style:{background:"#fff",boxShadow:"2px 0 8px 0 rgba(29,35,41,.05)"},children:[t("div",{style:{height:64,display:"flex",alignItems:"center",justifyContent:"center",borderBottom:"1px solid #f0f0f0"},children:t(dt,{level:4,style:{margin:0,color:"#1890ff"},children:l?"租赁":"租赁管理系统"})}),t(Kt,{mode:"inline",selectedKeys:o(),onClick:i,items:h,style:{borderRight:0,marginTop:16}})]}),g(Fe,{children:[g(Tn,{style:{padding:"0 16px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #f0f0f0"},children:[g("div",{style:{display:"flex",alignItems:"center"},children:[t(k,{type:"text",icon:l?t(un,{}):t(ln,{}),onClick:()=>s(!l),style:{marginRight:16}}),t(dt,{level:4,style:{margin:0},children:r})]}),t(Zt,{menu:{items:p},placement:"bottomRight",children:g("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",padding:"8px 12px",borderRadius:6,transition:"background-color 0.3s"},children:[t(Gt,{size:"small",icon:t(Ue,{})}),t("span",{style:{marginLeft:8},children:"管理员"})]})})]}),t(An,{style:{margin:"16px",padding:"24px",background:"#fff",borderRadius:6,boxShadow:"0 1px 3px 0 rgba(0,0,0,0.1)",overflow:"auto"},children:e})]})]})},$n=()=>{const[e,r]=d.useState({todayOrders:0,todayRevenue:0,availableVehicles:0,rentedVehicles:0}),[a,n]=d.useState(!1),[l,s]=d.useState(null),o=async()=>{try{n(!0),s(null);const i=await T("/dashboard/stats");r(i.data||{todayOrders:0,todayRevenue:0,availableVehicles:0,rentedVehicles:0})}catch(i){const h=i instanceof Error?i.message:"获取仪表盘数据失败";s(h),r({todayOrders:12,todayRevenue:8560,availableVehicles:28,rentedVehicles:15}),console.warn("仪表盘API调用失败，使用模拟数据:",h)}finally{n(!1)}};return d.useEffect(()=>{o()},[]),{stats:e,loading:a,error:l,fetchStats:o}},{Title:Rn}=se,Nn=()=>{const{stats:e,loading:r}=$n();return t(le,{title:"仪表盘",children:g(ge,{spinning:r,children:[g(G,{gutter:16,style:{marginBottom:24},children:[t(D,{span:6,children:t($,{children:t(Y,{title:"今日订单",value:e.todayOrders,valueStyle:{color:"#3f8600"},prefix:t(ot,{}),suffix:"单"})})}),t(D,{span:6,children:t($,{children:t(Y,{title:"今日收入",value:e.todayRevenue,precision:2,valueStyle:{color:"#3f8600"},prefix:"¥",suffix:t(ot,{})})})}),t(D,{span:6,children:t($,{children:t(Y,{title:"可用车辆",value:e.availableVehicles,valueStyle:{color:"#1890ff"},suffix:"辆"})})}),t(D,{span:6,children:t($,{children:t(Y,{title:"租出车辆",value:e.rentedVehicles,valueStyle:{color:"#cf1322"},suffix:"辆"})})})]}),g($,{children:[t(Rn,{level:3,children:"欢迎使用租车SaaS系统"}),t("p",{children:"这是一个功能完善的租车行业数字化管理平台"}),t("p",{children:"您可以通过左侧菜单访问各个功能模块："}),g("ul",{children:[g("li",{children:[t("strong",{children:"门店管理"}),"：管理您的门店信息和营业状态"]}),g("li",{children:[t("strong",{children:"车辆管理"}),"：管理车辆信息、车型库和车辆审核"]}),g("li",{children:[t("strong",{children:"订单管理"}),"：查看和处理客户订单"]}),g("li",{children:[t("strong",{children:"支付管理"}),"：管理支付记录和退款"]}),g("li",{children:[t("strong",{children:"员工管理"}),"：管理员工账户和权限"]})]})]})]})})},_n=({visible:e,onCancel:r,onSubmit:a,initialValues:n,title:l})=>{const[s]=S.useForm(),o=async()=>{try{const h=await s.validateFields();h.businessStartTime&&(h.businessStartTime=h.businessStartTime.format("HH:mm:ss")),h.businessEndTime&&(h.businessEndTime=h.businessEndTime.format("HH:mm:ss")),await a(h),s.resetFields()}catch(h){console.error("表单验证失败:",h)}},i=()=>{s.resetFields(),r()};return pt.useEffect(()=>{if(e&&n){const h={...n,businessStartTime:n.businessStartTime?ne(n.businessStartTime,"HH:mm:ss"):void 0,businessEndTime:n.businessEndTime?ne(n.businessEndTime,"HH:mm:ss"):void 0};s.setFieldsValue(h)}else e&&s.resetFields()},[e,n,s]),t(X,{title:l,open:e,onCancel:i,onOk:o,okText:"保存",cancelText:"取消",width:600,children:g(S,{form:s,layout:"vertical",initialValues:{minAdvanceHours:2,maxAdvanceDays:30,serviceFee:0},children:[t(S.Item,{label:"门店名称",name:"storeName",rules:[{required:!0,message:"请输入门店名称"},{max:100,message:"门店名称不能超过100个字符"}],children:t(M,{placeholder:"请输入门店名称"})}),t(S.Item,{label:"所在城市",name:"city",rules:[{required:!0,message:"请选择所在城市"},{max:50,message:"城市名称不能超过50个字符"}],children:g(E,{placeholder:"请选择城市",children:[t(E.Option,{value:"北京",children:"北京"}),t(E.Option,{value:"上海",children:"上海"}),t(E.Option,{value:"广州",children:"广州"}),t(E.Option,{value:"深圳",children:"深圳"}),t(E.Option,{value:"杭州",children:"杭州"}),t(E.Option,{value:"南京",children:"南京"}),t(E.Option,{value:"成都",children:"成都"}),t(E.Option,{value:"重庆",children:"重庆"})]})}),t(S.Item,{label:"详细地址",name:"address",rules:[{required:!0,message:"请输入详细地址"},{max:200,message:"地址不能超过200个字符"}],children:t(M.TextArea,{placeholder:"请输入详细地址",rows:3})}),t(S.Item,{label:"经纬度",children:g(M.Group,{compact:!0,children:[t(S.Item,{name:"longitude",style:{width:"50%"},rules:[{type:"number",min:-180,max:180,message:"经度必须在-180到180之间"}],children:t(W,{placeholder:"经度",style:{width:"100%"},precision:6})}),t(S.Item,{name:"latitude",style:{width:"50%"},rules:[{type:"number",min:-90,max:90,message:"纬度必须在-90到90之间"}],children:t(W,{placeholder:"纬度",style:{width:"100%"},precision:6})})]})}),t(S.Item,{label:"营业时间",children:g(M.Group,{compact:!0,children:[t(S.Item,{name:"businessStartTime",style:{width:"50%"},rules:[{required:!0,message:"请选择营业开始时间"}],children:t(Ve,{placeholder:"开始时间",style:{width:"100%"},format:"HH:mm:ss"})}),t(S.Item,{name:"businessEndTime",style:{width:"50%"},rules:[{required:!0,message:"请选择营业结束时间"}],children:t(Ve,{placeholder:"结束时间",style:{width:"100%"},format:"HH:mm:ss"})})]})}),t(S.Item,{label:"最小提前预定时间(小时)",name:"minAdvanceHours",rules:[{required:!0,message:"请输入最小提前预定时间"},{type:"number",min:1,message:"最小提前预定时间不能少于1小时"}],children:t(W,{placeholder:"小时",style:{width:"100%"},min:1})}),t(S.Item,{label:"最大提前预定天数",name:"maxAdvanceDays",rules:[{required:!0,message:"请输入最大提前预定天数"},{type:"number",min:1,max:365,message:"天数必须在1-365之间"}],children:t(W,{placeholder:"天数",style:{width:"100%"},min:1,max:365})}),t(S.Item,{label:"车行手续费(分)",name:"serviceFee",rules:[{required:!0,message:"请输入车行手续费"},{type:"number",min:0,message:"手续费不能为负数"}],children:t(W,{placeholder:"分",style:{width:"100%"},min:0})})]})})},Ut=()=>{const[e,r]=d.useState([]),[a,n]=d.useState(!1),[l,s]=d.useState(null),o=c=>c.map(u=>({id:String(u.id||""),storeName:u.storeName||"",name:u.storeName||"",city:u.city||"",address:u.address||"",longitude:u.longitude,latitude:u.latitude,businessStartTime:u.businessStartTime,businessEndTime:u.businessEndTime,auditStatus:u.auditStatus,auditStatusDesc:u.auditStatusDesc,onlineStatus:u.onlineStatus,onlineStatusDesc:u.onlineStatusDesc,minAdvanceHours:u.minAdvanceHours,maxAdvanceDays:u.maxAdvanceDays,serviceFee:u.serviceFee,vehicleCount:u.vehicleCount,createdTime:u.createdTime,updatedTime:u.updatedTime,phone:"暂无",status:u.onlineStatus===1?"active":"inactive"})),i=async()=>{try{n(!0),s(null);const c=await ue.getStores();console.log("门店API返回数据:",c);let u=[];if(c!=null&&c.data&&(c.data.records&&Array.isArray(c.data.records)?u=c.data.records:Array.isArray(c.data)&&(u=c.data)),console.log("解析后的门店数据:",u),u.length>0){const m=o(u);console.log("转换后的门店数据:",m),r(m)}else console.warn("门店数据为空，使用Mock数据"),r([{id:"1",storeName:"总店",name:"总店",city:"上海",address:"上海市浦东新区陆家嘴金融中心",phone:"021-12345678",status:"active",onlineStatus:1},{id:"2",storeName:"虹桥分店",name:"虹桥分店",city:"上海",address:"上海市长宁区虹桥路1号",phone:"021-87654321",status:"active",onlineStatus:1}])}catch(c){const u=c instanceof Error?c.message:"获取门店列表失败";s(u),I.error(u),r([{id:"1",storeName:"总店",name:"总店",city:"上海",address:"上海市浦东新区陆家嘴金融中心",phone:"021-12345678",status:"active",onlineStatus:1},{id:"2",storeName:"虹桥分店",name:"虹桥分店",city:"上海",address:"上海市长宁区虹桥路1号",phone:"021-87654321",status:"active",onlineStatus:1}])}finally{n(!1)}},h=async c=>{try{n(!0),await ue.createStore(c),I.success("门店创建成功"),await i()}catch(u){const m=u instanceof Error?u.message:"创建门店失败";throw I.error(m),u}finally{n(!1)}},f=async(c,u)=>{try{n(!0),await ue.updateStore(c,u),I.success("门店更新成功"),await i()}catch(m){const v=m instanceof Error?m.message:"更新门店失败";throw I.error(v),m}finally{n(!1)}},p=async c=>{try{n(!0),await ue.deleteStore(c),I.success("门店删除成功"),await i()}catch(u){const m=u instanceof Error?u.message:"删除门店失败";throw I.error(m),u}finally{n(!1)}};return d.useEffect(()=>{i()},[]),{stores:e,loading:a,error:l,fetchStores:i,createStore:h,updateStore:f,deleteStore:p}};const Dn=(e,r)=>{const a=d.useRef(null);return(...n)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(...n)},r)}},Ke=({visible:e,onCancel:r,onFinish:a,initialCoordinates:n})=>{const l=d.useRef(null),s=d.useRef(null),o=d.useRef(null),i=d.useRef(null),[h,f]=d.useState(n||[]),[p,c]=d.useState(!1),u=d.useRef(null),m=w=>{console.log(`[ServiceAreaMapModal] ${w}`)};Dn(w=>{f(w)},100);const v=()=>{try{if(m("开始清理资源"),i.current&&u.current)try{m("清理鼠标工具事件监听器"),i.current.off("draw",u.current)}catch(w){m(`清理鼠标工具事件监听器错误: ${w}`),console.error("清理鼠标工具事件监听器错误:",w)}if(i.current)try{m("关闭鼠标工具"),i.current.close(!0)}catch(w){m(`关闭鼠标工具错误: ${w}`),console.error("关闭鼠标工具错误:",w)}if(o.current){try{m("清理多边形事件监听器"),o.current.off("adjust"),o.current.off("dragstart")}catch(w){m(`清理多边形事件监听器错误: ${w}`),console.error("清理多边形事件监听器错误:",w)}if(s.current)try{m("移除多边形"),s.current.remove(o.current)}catch(w){m(`移除多边形错误: ${w}`),console.error("移除多边形错误:",w)}}i.current=null,o.current=null,s.current=null,u.current=null,m("资源清理完成")}catch(w){m(`组件卸载清理错误: ${w}`),console.error("组件卸载清理错误:",w)}};d.useEffect(()=>(m(`组件Effect触发, visible: ${e}`),e&&l.current&&!s.current&&(m("初始化地图"),x()),e&&s.current&&(m("更新坐标点"),f(n||[]),setTimeout(()=>{C(n||[])},100)),()=>{m("组件卸载，执行清理"),v()}),[e,n]);const b=w=>!w||!Array.isArray(w)?[]:w.filter(y=>{if(!y||!Array.isArray(y)||y.length<2)return!1;const P=typeof y[0]=="number"?y[0]:parseFloat(y[0]),O=typeof y[1]=="number"?y[1]:parseFloat(y[1]);return isNaN(P)||isNaN(O)||Math.abs(P)>180||Math.abs(O)>90?!1:[P,O]}),x=()=>{if(m("开始初始化地图"),!l.current){m("地图容器不存在");return}if(typeof window.AMap>"u"){m("高德地图API未加载"),I.error("地图加载失败，请检查网络连接");return}try{m("创建地图实例");const w=new window.AMap.Map(l.current,{zoom:11,center:[116.397428,39.90923]});if(s.current=w,m("地图实例创建成功"),m("加载鼠标工具插件"),window.AMap.plugin(["AMap.MouseTool"],()=>{try{m("初始化鼠标工具");const y=new window.AMap.MouseTool(w);i.current=y,m("鼠标工具初始化成功");const P=O=>{m("绘制完成事件触发"),y&&u.current&&(m("移除绘制事件监听器"),y.off("draw",u.current)),setTimeout(()=>{try{if(m("处理绘制完成事件"),O.obj&&O.obj.getPath){m("获取路径坐标");const L=O.obj.getPath().map(J=>J&&typeof J=="object"&&J.lng!==void 0&&J.lat!==void 0?[J.lng,J.lat]:null).filter(Boolean);m(`获取到 ${L.length} 个坐标点`);const re=b(L);f(re),m("坐标状态更新完成"),y&&(m("关闭鼠标工具"),y.close(!0)),setTimeout(()=>{m("绘制自定义多边形"),C(re)},10)}}catch(z){m(`绘制完成事件处理错误: ${z}`),console.error("绘制完成事件处理错误:",z),I.error("绘制完成处理时出现错误")}finally{setTimeout(()=>{m("设置绘制状态为完成"),c(!1)},50)}},10)};u.current=P,m("添加绘制事件监听器"),y.on("draw",P)}catch(y){m(`初始化鼠标工具错误: ${y}`),console.error("初始化鼠标工具错误:",y),I.error("地图工具初始化失败")}}),n&&Array.isArray(n)&&n.length>0){m("绘制初始坐标");const y=b(n);setTimeout(()=>{C(y)},100)}}catch(w){m(`初始化地图错误: ${w}`),console.error("初始化地图错误:",w),I.error("地图初始化失败")}},C=w=>{const y=b(w);if(!(!s.current||y.length===0)){if(o.current)try{m("清理多边形事件监听器"),o.current.off("adjust"),o.current.off("dragstart"),s.current.remove(o.current)}catch(P){m(`清理旧多边形错误: ${P}`),console.error("清理旧多边形错误:",P)}try{m("创建新的多边形");const P=new window.AMap.Polygon({path:y.map(L=>new window.AMap.LngLat(L[0],L[1])),strokeColor:"#3366FF",strokeWeight:3,strokeOpacity:.8,fillOpacity:.3,fillColor:"#1791fc",zIndex:50,editable:!0}),O=()=>{try{const re=P.getPath().map(ae=>ae&&typeof ae=="object"&&ae.lng!==void 0&&ae.lat!==void 0?[ae.lng,ae.lat]:null).filter(Boolean),J=b(re);f(J)}catch(L){m(`多边形调整事件错误: ${L}`),console.error("多边形调整事件错误:",L)}},z=()=>{try{P.setOptions({fillColor:"#1791fc"})}catch(L){m(`多边形拖拽开始事件错误: ${L}`),console.error("多边形拖拽开始事件错误:",L)}};P.on("adjust",O),P.on("dragstart",z),s.current.add(P),o.current=P,s.current.setFitView([P]),m("多边形创建完成")}catch(P){m(`创建多边形错误: ${P}`),console.error("创建多边形错误:",P),I.error("绘制区域时出现错误，请重试")}}},A=()=>{if(!i.current){I.warning("地图工具尚未初始化完成，请稍后重试");return}try{H(),c(!0),i.current.polygon({strokeColor:"#3366FF",strokeWeight:3,strokeOpacity:.8,fillOpacity:.3,fillColor:"#1791fc"})}catch(w){console.error("开始绘制错误:",w),I.error("开始绘制时出现错误"),c(!1)}},R=()=>{if(h.length<3){I.warning("请至少选择3个点来绘制区域");return}try{a(h)}catch(w){console.error("完成绘制错误:",w),I.error("保存区域时出现错误")}},H=()=>{var w;try{if(f([]),o.current){try{(w=s.current)==null||w.remove(o.current)}catch(y){console.error("移除多边形错误:",y)}o.current=null}if(i.current)try{i.current.close(!0)}catch(y){console.error("关闭鼠标工具错误:",y)}}catch(y){console.error("清除操作错误:",y),I.error("清除操作时出现错误")}};return g(X,{title:"设置服务范围",visible:e,onCancel:r,onOk:R,width:1e3,footer:[t(k,{onClick:r,children:"取消"},"back"),t(k,{onClick:H,children:"清除"},"clear"),t(k,{type:"primary",onClick:A,loading:p,children:p?"绘制中...":"开始绘制"},"draw"),t(k,{type:"primary",onClick:R,children:"确定"},"submit")],children:[t("div",{className:"map-instructions",children:t("p",{children:'点击"开始绘制"按钮，在地图上绘制服务范围区域，至少需要3个点。绘制完成后可拖拽顶点调整区域。'})}),t("div",{ref:l,style:{width:"100%",height:"500px"},className:"service-area-map"}),g("div",{className:"coordinates-info",children:[g("p",{children:["已选择 ",h.length," 个坐标点"]}),h.length>0&&t("div",{className:"coordinates-list",children:h.map((w,y)=>{if(!w||!Array.isArray(w)||w.length<2||w[0]===void 0||w[1]===void 0)return t("span",{className:"coordinate-item",children:"(无效坐标)"},y);const P=typeof w[0]=="number"?w[0]:parseFloat(w[0]),O=typeof w[1]=="number"?w[1]:parseFloat(w[1]);return isNaN(P)||isNaN(O)?t("span",{className:"coordinate-item",children:"(无效坐标)"},y):g("span",{className:"coordinate-item",children:["(",P.toFixed(6),", ",O.toFixed(6),")"]},y)})})]})]})};const zn=({storeId:e,storeName:r})=>{const[a]=S.useForm(),[n,l]=d.useState([]),[s,o]=d.useState(!1),[i,h]=d.useState(!1),[f,p]=d.useState(!1),[c,u]=d.useState(null),[m,v]=d.useState([]),b=async()=>{o(!0);try{const y=await we.listByStoreId(Number(e));l(y.data||[])}catch{I.error("获取服务范围列表失败")}finally{o(!1)}};d.useEffect(()=>{e&&b()},[e]);const x=async y=>{try{const P={...c,...y,storeId:Number(e),serviceStartTime:y.serviceTime[0].format("HH:mm"),serviceEndTime:y.serviceTime[1].format("HH:mm"),fenceCoordinates:JSON.stringify(m)};c!=null&&c.id?(await we.update(P),I.success("更新成功")):(await we.create(P),I.success("创建成功")),h(!1),a.resetFields(),u(null),v([]),b()}catch{I.error(c!=null&&c.id?"更新失败":"创建失败")}},C=y=>{if(u(y),a.setFieldsValue({...y,serviceTime:[y.serviceStartTime?ne(y.serviceStartTime,"HH:mm"):null,y.serviceEndTime?ne(y.serviceEndTime,"HH:mm"):null]}),y.fenceCoordinates)try{const P=JSON.parse(y.fenceCoordinates);v(P)}catch{v([])}h(!0)},A=y=>{X.confirm({title:"确认删除",content:"确定要删除这个服务范围吗？",onOk:async()=>{try{await we.delete(y),I.success("删除成功"),b()}catch{I.error("删除失败")}}})},R=()=>{p(!0)},H=y=>{v(y),p(!1)},w=[{title:"区域名称",dataIndex:"areaName",key:"areaName"},{title:"区域类型",dataIndex:"areaType",key:"areaType",render:y=>y===1?"取车区域":"还车区域"},{title:"服务时间",key:"serviceTime",render:(y,P)=>g("span",{children:[P.serviceStartTime," - ",P.serviceEndTime]})},{title:"提前预定时间",dataIndex:"advanceHours",key:"advanceHours",render:y=>`${y}小时`},{title:"送车上门",dataIndex:"doorToDoorDelivery",key:"doorToDoorDelivery",render:y=>y===1?"是":"否"},{title:"操作",key:"action",render:(y,P)=>g(U,{size:"middle",children:[t(k,{type:"primary",icon:t(Ce,{}),onClick:()=>C(P),size:"small",children:"编辑"}),t(k,{danger:!0,icon:t(Je,{}),onClick:()=>A(P.id),size:"small",children:"删除"})]})}];return g("div",{className:"store-service-area-management",children:[t($,{title:`[${r}] 服务范围管理`,extra:t(k,{type:"primary",icon:t(qe,{}),onClick:()=>{u(null),a.resetFields(),v([]),h(!0)},children:"新增服务范围"}),children:t(oe,{dataSource:n,columns:w,loading:s,rowKey:"id",pagination:{pageSize:10}})}),t(X,{title:c!=null&&c.id?"编辑服务范围":"新增服务范围",visible:i,onCancel:()=>{h(!1),a.resetFields(),u(null),v([])},onOk:()=>a.submit(),width:800,children:g(S,{form:a,layout:"vertical",onFinish:x,children:[g(G,{gutter:16,children:[t(D,{span:12,children:t(S.Item,{name:"areaName",label:"区域名称",rules:[{required:!0,message:"请输入区域名称"}],children:t(M,{placeholder:"请输入区域名称"})})}),t(D,{span:12,children:t(S.Item,{name:"areaType",label:"区域类型",rules:[{required:!0,message:"请选择区域类型"}],children:g(q.Group,{children:[t(q,{value:1,children:"取车区域"}),t(q,{value:2,children:"还车区域"})]})})})]}),g(S.Item,{label:"电子围栏",required:!0,children:[t(k,{onClick:R,children:m.length>0?"已设置电子围栏":"设置电子围栏"}),m.length>0&&g("div",{style:{marginTop:8},children:["已选择 ",m.length," 个坐标点"]})]}),g(G,{gutter:16,children:[t(D,{span:12,children:t(S.Item,{name:"advanceHours",label:"提前预定时间(小时)",rules:[{required:!0,message:"请输入提前预定时间"}],children:t(W,{min:0,style:{width:"100%"},placeholder:"请输入提前预定时间"})})}),t(D,{span:12,children:t(S.Item,{name:"serviceTime",label:"服务时间",rules:[{required:!0,message:"请选择服务时间"}],children:t(Ve.RangePicker,{style:{width:"100%"},format:"HH:mm"})})})]}),g(G,{gutter:16,children:[t(D,{span:12,children:t(S.Item,{name:"doorToDoorDelivery",label:"是否提供送车上门",rules:[{required:!0,message:"请选择是否提供送车上门"}],children:g(q.Group,{children:[t(q,{value:1,children:"是"}),t(q,{value:0,children:"否"})]})})}),t(D,{span:12,children:t(S.Item,{name:"deliveryFee",label:"送车上门费用(元)",rules:[{required:!0,message:"请输入送车上门费用"}],children:t(W,{min:0,style:{width:"100%"},placeholder:"请输入送车上门费用",formatter:y=>`${y}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:y=>y?parseFloat(y.replace(/,*/g,"")):0})})})]}),t(S.Item,{name:"freePickupToStore",label:"是否免费接至门店",rules:[{required:!0,message:"请选择是否免费接至门店"}],children:g(q.Group,{children:[t(q,{value:1,children:"是"}),t(q,{value:0,children:"否"})]})})]})}),t(Ke,{visible:f,onCancel:()=>p(!1),onFinish:H,initialCoordinates:m})]})},Ln=()=>{const{stores:e,loading:r,deleteStore:a,createStore:n,updateStore:l}=Ut(),[s,o]=d.useState(!1),[i,h]=d.useState(void 0),[f,p]=d.useState(void 0),c=Array.isArray(e)?e:[],u=async O=>{try{await a(O)}catch{}},m=()=>{h(void 0),o(!0)},v=O=>{h(O),o(!0)},b=O=>{p(O)},x=()=>{p(void 0)},C=async O=>{try{i?(await l(i.id,O),I.success("门店更新成功")):(await n(O),I.success("门店创建成功")),o(!1),h(void 0)}catch{}},A=()=>{o(!1),h(void 0)},R=c.filter(O=>O.onlineStatus===1||O.status==="active").length,H=c.filter(O=>O.onlineStatus===0||O.status==="inactive").length,w=128e3,y=[{title:"门店名称",dataIndex:"storeName",key:"storeName",render:(O,z)=>z.storeName||z.name||O},{title:"城市",dataIndex:"city",key:"city"},{title:"门店地址",dataIndex:"address",key:"address"},{title:"联系电话",dataIndex:"phone",key:"phone",render:O=>O||"暂无"},{title:"状态",dataIndex:"status",key:"status",render:(O,z)=>{const L=z.onlineStatus===1||O==="active",re=z.onlineStatusDesc||(L?"上架":"下架");return t(me,{color:L?"green":"red",children:re})}},{title:"操作",key:"action",render:(O,z)=>g(U,{size:"middle",children:[t(k,{type:"link",icon:t(Ce,{}),onClick:()=>v(z),children:"编辑"}),t(k,{type:"link",onClick:()=>b(z),children:"服务范围管理"}),t(gt,{title:"删除门店",description:"确定要删除这个门店吗？",onConfirm:()=>u(z.id),okText:"确定",cancelText:"取消",children:t(k,{type:"link",danger:!0,icon:t(Je,{}),children:"删除"})})]})}],P=c;return f?g(le,{title:"门店管理",children:[t(k,{onClick:x,style:{marginBottom:16},children:"← 返回门店列表"}),t(zn,{storeId:f.id,storeName:f.storeName||f.name||""})]}):t(le,{title:"门店管理",children:g(ge,{spinning:r,children:[g(G,{gutter:16,style:{marginBottom:24},children:[t(D,{span:6,children:t($,{children:t(Y,{title:"门店总数",value:c.length})})}),t(D,{span:6,children:t($,{children:t(Y,{title:"上架门店",value:R})})}),t(D,{span:6,children:t($,{children:t(Y,{title:"下架门店",value:H})})}),t(D,{span:6,children:t($,{children:t(Y,{title:"月营业额",value:w,prefix:"¥"})})})]}),t($,{title:"门店列表",extra:t(k,{type:"primary",icon:t(qe,{}),onClick:m,children:"新增门店"}),children:t(oe,{columns:y,dataSource:P.map(O=>({...O,key:O.id})),loading:r})}),t(_n,{visible:s,onCancel:A,onSubmit:C,initialValues:i,title:i?"编辑门店":"新增门店"})]})})},Fn=()=>{const[e,r]=d.useState([]),[a,n]=d.useState(!1),[l,s]=d.useState(null),o=async()=>{n(!0),s(null);try{const i=await kn.getAllCarModels();if(i.success)r(i.data||[]);else throw new Error(i.message||"获取车型数据失败")}catch(i){const h=i instanceof Error?i.message:"获取车型数据失败";s(h),I.error(h),r([])}finally{n(!1)}};return d.useEffect(()=>{o()},[]),{carModels:e,loading:a,error:l,refetch:o}},Vn=({visible:e,onCancel:r,onSubmit:a,initialValues:n,title:l})=>{const[s]=S.useForm(),{stores:o}=Ut(),{carModels:i,loading:h}=Fn(),f=Array.isArray(o)?o.map(m=>({label:m.storeName||m.name||"",value:m.id})):[],p=Array.isArray(i)?i.map(m=>({label:`${m.brand}${m.series} - ${m.model}`,value:m.id})):[],c=async()=>{try{const m=await s.validateFields();m.registerDate&&(m.registerDate=m.registerDate.format("YYYY-MM-DD")),await a(m),s.resetFields()}catch(m){console.error("表单验证失败:",m)}},u=()=>{s.resetFields(),r()};return d.useEffect(()=>{if(e&&n){const m={...n,registerDate:n.registerDate?ne(n.registerDate):void 0};s.setFieldsValue(m)}else e&&s.resetFields()},[e,n,s]),t(X,{title:l,open:e,onCancel:u,onOk:c,okText:"保存",cancelText:"取消",width:600,children:g(S,{form:s,layout:"vertical",initialValues:{licenseType:1,usageNature:1,mileage:0},children:[t(S.Item,{label:"归属门店",name:"storeId",rules:[{required:!0,message:"请选择归属门店"}],children:t(E,{placeholder:"请选择门店",options:f})}),t(S.Item,{label:"车牌号",name:"licensePlate",rules:[{required:!0,message:"请输入车牌号"},{pattern:/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳]$/,message:"车牌号格式不正确"}],children:t(M,{placeholder:"请输入车牌号，如：京A12345"})}),t(S.Item,{label:"车型ID",name:"carModelId",rules:[{required:!0,message:"请选择车型"}],children:t(E,{placeholder:"请选择车型",loading:h,options:p,showSearch:!0,filterOption:(m,v)=>{var b;return((b=v==null?void 0:v.label)==null?void 0:b.toLowerCase().includes(m.toLowerCase()))||!1}})}),t(S.Item,{label:"牌照类型",name:"licenseType",rules:[{required:!0,message:"请选择牌照类型"}],children:g(E,{placeholder:"请选择牌照类型",children:[t(E.Option,{value:1,children:"普通"}),t(E.Option,{value:2,children:"京牌"}),t(E.Option,{value:3,children:"沪牌"}),t(E.Option,{value:4,children:"深牌"}),t(E.Option,{value:5,children:"粤A牌"}),t(E.Option,{value:6,children:"杭州牌"})]})}),t(S.Item,{label:"注册日期",name:"registerDate",rules:[{required:!0,message:"请选择注册日期"}],children:t(vt,{placeholder:"请选择注册日期",style:{width:"100%"},disabledDate:m=>m&&m>ne()})}),t(S.Item,{label:"车架号",name:"vin",rules:[{required:!0,message:"请输入车架号"},{pattern:/^[A-HJ-NPR-Z\d]{17}$/,message:"车架号格式不正确，应为17位字符"}],children:t(M,{placeholder:"请输入17位车架号",maxLength:17})}),t(S.Item,{label:"发动机号",name:"engineNo",rules:[{required:!0,message:"请输入发动机号"},{max:50,message:"发动机号不能超过50个字符"}],children:t(M,{placeholder:"请输入发动机号"})}),t(S.Item,{label:"使用性质",name:"usageNature",rules:[{required:!0,message:"请选择使用性质"}],children:g(E,{placeholder:"请选择使用性质",children:[t(E.Option,{value:1,children:"营运"}),t(E.Option,{value:2,children:"非营运"})]})}),t(S.Item,{label:"总里程(公里)",name:"mileage",rules:[{type:"number",min:0,message:"总里程不能为负数"}],children:t(W,{placeholder:"请输入总里程",style:{width:"100%"},min:0,addonAfter:"公里"})})]})})},jn=()=>{const[e,r]=d.useState([]),[a,n]=d.useState(!1),[l,s]=d.useState(null),o=c=>c.map(u=>{var m,v;return{id:String(u.id||""),storeId:u.storeId,storeName:u.storeName,licensePlate:u.licensePlate||"",carModelId:u.carModelId,carModel:u.carModel,licenseType:u.licenseType,licenseTypeDesc:u.licenseTypeDesc,registerDate:u.registerDate,vin:u.vin,engineNo:u.engineNo,usageNature:u.usageNature,usageNatureDesc:u.usageNatureDesc,auditStatus:u.auditStatus,auditStatusDesc:u.auditStatusDesc,onlineStatus:u.onlineStatus,onlineStatusDesc:u.onlineStatusDesc,vehicleStatus:u.vehicleStatus,vehicleStatusDesc:u.vehicleStatusDesc,mileage:u.mileage,createdTime:u.createdTime,updatedTime:u.updatedTime,plateNumber:u.licensePlate||"",model:((m=u.carModel)==null?void 0:m.model)||"未知车型",brand:((v=u.carModel)==null?void 0:v.brand)||"未知品牌",color:"白色",status:(()=>{switch(u.vehicleStatus){case 1:return"available";case 2:return"rented";case 3:return"maintenance";case 4:return"inactive";default:return"available"}})(),dailyRate:150}}),i=async()=>{try{n(!0),s(null);const c=await he.getVehicles();console.log("车辆API返回数据:",c);let u=[];if(c!=null&&c.data&&(c.data.records&&Array.isArray(c.data.records)?u=c.data.records:Array.isArray(c.data)&&(u=c.data)),console.log("解析后的车辆数据:",u),u.length>0){const m=o(u);console.log("转换后的车辆数据:",m),r(m)}else console.warn("车辆数据为空，使用Mock数据"),r([{id:"1",licensePlate:"沪A12345",plateNumber:"沪A12345",model:"朗逸",brand:"大众",color:"白色",status:"available",dailyRate:150},{id:"2",licensePlate:"沪B67890",plateNumber:"沪B67890",model:"轩逸",brand:"日产",color:"银色",status:"rented",dailyRate:140},{id:"3",licensePlate:"沪C11111",plateNumber:"沪C11111",model:"Model 3",brand:"特斯拉",color:"黑色",status:"maintenance",dailyRate:300}])}catch(c){const u=c instanceof Error?c.message:"获取车辆列表失败";s(u),I.error(u),r([{id:"1",licensePlate:"沪A12345",plateNumber:"沪A12345",model:"朗逸",brand:"大众",color:"白色",status:"available",dailyRate:150},{id:"2",licensePlate:"沪B67890",plateNumber:"沪B67890",model:"轩逸",brand:"日产",color:"银色",status:"rented",dailyRate:140},{id:"3",licensePlate:"沪C11111",plateNumber:"沪C11111",model:"Model 3",brand:"特斯拉",color:"黑色",status:"maintenance",dailyRate:300}])}finally{n(!1)}},h=async c=>{try{n(!0),await he.createVehicle(c),I.success("车辆创建成功"),await i()}catch(u){const m=u instanceof Error?u.message:"创建车辆失败";throw I.error(m),u}finally{n(!1)}},f=async(c,u)=>{try{n(!0),await he.updateVehicle(c,u),I.success("车辆更新成功"),await i()}catch(m){const v=m instanceof Error?m.message:"更新车辆失败";throw I.error(v),m}finally{n(!1)}},p=async c=>{try{n(!0),await he.deleteVehicle(c),I.success("车辆删除成功"),await i()}catch(u){const m=u instanceof Error?u.message:"删除车辆失败";throw I.error(m),u}finally{n(!1)}};return d.useEffect(()=>{i()},[]),{vehicles:e,loading:a,error:l,fetchVehicles:i,createVehicle:h,updateVehicle:f,deleteVehicle:p}},{Search:Bn}=M,Hn=()=>{const{vehicles:e,loading:r,deleteVehicle:a,createVehicle:n,updateVehicle:l}=jn(),[s,o]=d.useState(!1),[i,h]=d.useState(void 0),f=Array.isArray(e)?e:[],p=async C=>{try{await a(C)}catch{}},c=()=>{h(void 0),o(!0)},u=C=>{h(C),o(!0)},m=async C=>{try{i?(await l(i.id,C),I.success("车辆更新成功")):(await n(C),I.success("车辆创建成功")),o(!1),h(void 0)}catch{}},v=()=>{o(!1),h(void 0)},b=[{title:"车牌号",dataIndex:"plateNumber",key:"plateNumber"},{title:"车型",dataIndex:"model",key:"model"},{title:"品牌",dataIndex:"brand",key:"brand"},{title:"颜色",dataIndex:"color",key:"color"},{title:"状态",dataIndex:"status",key:"status",render:C=>{const R={available:{color:"green",text:"可租用"},rented:{color:"blue",text:"已租出"},maintenance:{color:"orange",text:"维护中"},inactive:{color:"red",text:"停用"}}[C];return t(me,{color:R.color,children:R.text})}},{title:"日租金",dataIndex:"dailyRate",key:"dailyRate",render:C=>`¥${C}`},{title:"操作",key:"action",render:(C,A)=>g(U,{size:"middle",children:[t(k,{type:"link",icon:t(Ce,{}),onClick:()=>u(A),children:"编辑"}),t(gt,{title:"删除车辆",description:"确定要删除这辆车吗？",onConfirm:()=>p(A.id),okText:"确定",cancelText:"取消",children:t(k,{type:"link",danger:!0,icon:t(Je,{}),children:"删除"})})]})}],x=f;return t(le,{title:"车辆管理",children:g(ge,{spinning:r,children:[t($,{title:"车辆列表",extra:g(U,{children:[t(Bn,{placeholder:"搜索车牌号",style:{width:200}}),g(E,{defaultValue:"all",style:{width:120},children:[t(E.Option,{value:"all",children:"全部状态"}),t(E.Option,{value:"available",children:"可租用"}),t(E.Option,{value:"rented",children:"已租出"}),t(E.Option,{value:"maintenance",children:"维护中"})]}),t(k,{type:"primary",icon:t(qe,{}),onClick:c,children:"新增车辆"})]}),children:t(oe,{columns:b,dataSource:x.map(C=>({...C,key:C.id})),loading:r})}),t(Vn,{visible:s,onCancel:v,onSubmit:m,initialValues:i,title:i?"编辑车辆":"新增车辆"})]})})},Un=()=>{const[e,r]=d.useState([]),[a,n]=d.useState(!1),[l,s]=d.useState(null),o=async()=>{try{n(!0),s(null);const f=await De.getOrders(),p=Array.isArray(f==null?void 0:f.data)?f.data:[];r(p)}catch(f){const p=f instanceof Error?f.message:"获取订单列表失败";s(p),I.error(p),r([{id:"1",orderNo:"R20231201001",customerName:"张三",vehicleInfo:"沪A12345 大众朗逸",duration:"2023-12-01 至 2023-12-03",totalAmount:450,status:"ongoing"},{id:"2",orderNo:"R20231201002",customerName:"李四",vehicleInfo:"沪B67890 日产轩逸",duration:"2023-12-02 至 2023-12-05",totalAmount:560,status:"confirmed"},{id:"3",orderNo:"R20231130001",customerName:"王五",vehicleInfo:"沪C11111 特斯拉Model 3",duration:"2023-11-30 至 2023-12-01",totalAmount:600,status:"completed"}])}finally{n(!1)}},i=async f=>{try{return n(!0),(await De.getOrderDetail(f)).data}catch(p){const c=p instanceof Error?p.message:"获取订单详情失败";throw I.error(c),p}finally{n(!1)}},h=async(f,p)=>{try{n(!0),await De.updateOrderStatus(f,p),I.success("订单状态更新成功"),await o()}catch(c){const u=c instanceof Error?c.message:"更新订单状态失败";throw I.error(u),c}finally{n(!1)}};return d.useEffect(()=>{o()},[]),{orders:e,loading:a,error:l,fetchOrders:o,getOrderDetail:i,updateOrderStatus:h}},{RangePicker:qn}=vt,{Search:Jn}=M,Wn=()=>{const{orders:e,loading:r,updateOrderStatus:a}=Un(),n=Array.isArray(e)?e:[],l=[{title:"订单号",dataIndex:"orderNo",key:"orderNo"},{title:"客户姓名",dataIndex:"customerName",key:"customerName"},{title:"车辆信息",dataIndex:"vehicleInfo",key:"vehicleInfo"},{title:"租期",dataIndex:"duration",key:"duration"},{title:"总金额",dataIndex:"totalAmount",key:"totalAmount",render:o=>`¥${o}`},{title:"订单状态",dataIndex:"status",key:"status",render:o=>{const h={pending:{color:"orange",text:"待确认"},confirmed:{color:"blue",text:"已确认"},ongoing:{color:"green",text:"进行中"},completed:{color:"gray",text:"已完成"},cancelled:{color:"red",text:"已取消"}}[o];return t(me,{color:h.color,children:h.text})}},{title:"操作",key:"action",render:(o,i)=>g(U,{size:"middle",children:[t(k,{type:"link",icon:t(yt,{}),children:"查看"}),t(k,{type:"link",icon:t(Ce,{}),onClick:()=>{console.log("处理订单:",i.id)},children:"处理"})]})}],s=n;return t(le,{title:"订单管理",children:t(ge,{spinning:r,children:t($,{title:"订单列表",extra:g(U,{children:[t(Jn,{placeholder:"搜索订单号/客户",style:{width:200}}),g(E,{defaultValue:"all",style:{width:120},children:[t(E.Option,{value:"all",children:"全部状态"}),t(E.Option,{value:"pending",children:"待确认"}),t(E.Option,{value:"confirmed",children:"已确认"}),t(E.Option,{value:"ongoing",children:"进行中"}),t(E.Option,{value:"completed",children:"已完成"})]}),t(qn,{placeholder:["开始日期","结束日期"]})]}),children:t(oe,{columns:l,dataSource:s.map(o=>({...o,key:o.id})),loading:r})})})})};const{Title:Yn,Paragraph:ol}=se,{TextArea:ut}=M,{Step:Kn}=bt,Zn=()=>{const[e,r]=d.useState(0),[a]=S.useForm(),[n,l]=d.useState(!1),s=xe(),o=[{title:"基本信息",description:"填写企业基本信息"},{title:"详细资料",description:"完善企业详细资料"},{title:"联系信息",description:"设置联系人信息"},{title:"账户设置",description:"创建平台账户"}],i=async c=>{if(c.password!==c.confirmPassword){I.error("两次输入的密码不一致");return}l(!0);try{const u=await T("/merchant/register",{method:"POST",body:JSON.stringify(c)});u.code===200?(I.success("商户入住申请提交成功！我们将在1-3个工作日内完成审核"),s("/register-success",{state:{merchantId:u.data.merchantId}})):I.error(u.message||"提交失败，请重试")}catch(u){console.error("商户注册失败:",u),I.error("网络错误，请稍后重试")}finally{l(!1)}},h=async()=>{try{const c=await a.validateFields();r(e+1)}catch(c){console.log("验证失败:",c)}},f=()=>{r(e-1)},p=()=>{switch(e){case 0:return g(Z,{children:[t(S.Item,{label:"企业名称",name:"companyName",rules:[{required:!0,message:"请输入企业名称"}],children:t(M,{placeholder:"请输入企业全称"})}),t(S.Item,{label:"统一社会信用代码",name:"businessLicense",rules:[{required:!0,message:"请输入统一社会信用代码"},{pattern:/^[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/,message:"请输入正确的统一社会信用代码"}],children:t(M,{placeholder:"请输入18位统一社会信用代码"})}),t(S.Item,{label:"法定代表人",name:"legalPerson",rules:[{required:!0,message:"请输入法定代表人姓名"}],children:t(M,{placeholder:"请输入法定代表人姓名"})}),t(S.Item,{label:"企业联系电话",name:"contactPhone",rules:[{required:!0,message:"请输入联系电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:t(M,{placeholder:"请输入11位手机号码"})}),t(S.Item,{label:"企业邮箱",name:"contactEmail",rules:[{required:!0,message:"请输入企业邮箱"},{type:"email",message:"请输入正确的邮箱地址"}],children:t(M,{placeholder:"请输入企业邮箱地址"})})]});case 1:return g(Z,{children:[t(S.Item,{label:"经营地址",name:"businessAddress",rules:[{required:!0,message:"请输入经营地址"}],children:t(ut,{rows:3,placeholder:"请输入详细的经营地址"})}),t(S.Item,{label:"经营范围",name:"businessScope",rules:[{required:!0,message:"请输入经营范围"}],children:t(ut,{rows:3,placeholder:"请输入主要经营范围"})}),t(S.Item,{label:"注册资本",name:"registeredCapital",rules:[{required:!0,message:"请输入注册资本"}],children:t(M,{placeholder:"请输入注册资本（万元）",suffix:"万元"})}),t(S.Item,{label:"成立日期",name:"establishedDate",rules:[{required:!0,message:"请选择成立日期"}],children:t(M,{type:"date"})})]});case 2:return g(Z,{children:[t(S.Item,{label:"联系人姓名",name:"contactPersonName",rules:[{required:!0,message:"请输入联系人姓名"}],children:t(M,{placeholder:"请输入主要联系人姓名"})}),t(S.Item,{label:"联系人电话",name:"contactPersonPhone",rules:[{required:!0,message:"请输入联系人电话"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:t(M,{placeholder:"请输入联系人手机号"})}),t(S.Item,{label:"联系人邮箱",name:"contactPersonEmail",rules:[{required:!0,message:"请输入联系人邮箱"},{type:"email",message:"请输入正确的邮箱地址"}],children:t(M,{placeholder:"请输入联系人邮箱"})})]});case 3:return g(Z,{children:[t(S.Item,{label:"登录用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{min:4,max:20,message:"用户名长度为4-20个字符"},{pattern:/^[a-zA-Z0-9_]+$/,message:"用户名只能包含字母、数字和下划线"}],children:t(M,{placeholder:"请输入登录用户名"})}),t(S.Item,{label:"登录密码",name:"password",rules:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少6个字符"},{pattern:/^(?=.*[a-zA-Z])(?=.*\d)/,message:"密码必须包含字母和数字"}],children:t(M.Password,{placeholder:"请输入登录密码"})}),t(S.Item,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请确认密码"},({getFieldValue:c})=>({validator(u,m){return!m||c("password")===m?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致"))}})],children:t(M.Password,{placeholder:"请再次输入密码"})})]});default:return null}};return t("div",{className:"merchant-register-container",children:g($,{className:"register-form-card",children:[t(Yn,{level:2,style:{textAlign:"center",marginBottom:32},children:"商户入住申请"}),t(bt,{current:e,style:{marginBottom:32},children:o.map(c=>t(Kn,{title:c.title,description:c.description},c.title))}),g(S,{form:a,layout:"vertical",onFinish:i,style:{maxWidth:600,margin:"0 auto"},children:[p(),t(S.Item,{style:{marginTop:32},children:g(G,{gutter:16,children:[t(D,{span:12,children:e>0&&t(k,{onClick:f,style:{width:"100%"},children:"上一步"})}),t(D,{span:12,children:e<o.length-1?t(k,{type:"primary",onClick:h,style:{width:"100%"},children:"下一步"}):t(k,{type:"primary",htmlType:"submit",loading:n,style:{width:"100%"},children:"提交申请"})})]})})]}),t("div",{style:{textAlign:"center",marginTop:24},children:t(k,{type:"link",onClick:()=>s("/login"),children:"已有账号？立即登录"})})]})})},{Title:ht,Paragraph:il}=se,Gn=()=>{var n;const e=xe(),a=((n=te().state)==null?void 0:n.merchantId)||"待分配";return t("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:g($,{style:{width:"100%",maxWidth:600,borderRadius:12,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[t(Xt,{status:"success",title:"入住申请提交成功！",subTitle:`您的商户申请ID：${a}`,extra:[t(k,{type:"primary",onClick:()=>e("/login"),children:"返回登录"},"login"),t(k,{onClick:()=>e("/"),children:"返回首页"},"home")]}),g("div",{style:{marginTop:24},children:[t(ht,{level:4,children:"后续流程："}),g(ce,{children:[g(ce.Item,{dot:t(Fa,{style:{color:"#52c41a"}}),children:[t("strong",{children:"提交申请"}),t("br",{}),t("span",{style:{color:"#666"},children:"您已成功提交商户入住申请"})]}),g(ce.Item,{dot:t(Ne,{style:{color:"#1890ff"}}),children:[t("strong",{children:"资质审核"}),t("br",{}),t("span",{style:{color:"#666"},children:"我们将在1-3个工作日内完成审核"})]}),g(ce.Item,{dot:t(Ne,{style:{color:"#faad14"}}),children:[t("strong",{children:"账户激活"}),t("br",{}),t("span",{style:{color:"#666"},children:"审核通过后将通过邮件通知您激活账户"})]}),g(ce.Item,{dot:t(Ne,{style:{color:"#722ed1"}}),children:[t("strong",{children:"开始使用"}),t("br",{}),t("span",{style:{color:"#666"},children:"激活后即可登录系统开始使用"})]})]})]}),g("div",{style:{marginTop:32,padding:16,background:"#f6f8fa",borderRadius:8},children:[t(ht,{level:5,style:{margin:0,marginBottom:8},children:"温馨提示："}),g("ul",{style:{margin:0,paddingLeft:20},children:[t("li",{children:"请保持联系电话和邮箱畅通，我们会及时与您联系"}),t("li",{children:"如有疑问，请联系客服：400-xxx-xxxx"}),t("li",{children:"您可以通过邮件查看审核进度"})]})]})]})})},Qn=()=>{const[e,r]=d.useState([]),[a,n]=d.useState(!1),[l,s]=d.useState(null),o=async()=>{try{n(!0),s(null);const h=await T("/merchant/applications");r(h.data||[])}catch(h){const f=h instanceof Error?h.message:"获取商户申请列表失败";s(f),I.error(f),r([{id:"1",companyName:"上海某某汽车租赁有限公司",businessLicense:"91310000MA1234567X",legalPerson:"张三",contactPhone:"13800138001",contactEmail:"contact@example.com",businessAddress:"上海市浦东新区张江高科技园区",businessScope:"汽车租赁服务，汽车销售",registeredCapital:"500",establishedDate:"2020-01-15",contactPersonName:"李四",contactPersonPhone:"13800138002",contactPersonEmail:"lisi@example.com",username:"merchant001",status:"pending",createdAt:"2023-12-01T10:00:00Z"},{id:"2",companyName:"北京汽车服务有限公司",businessLicense:"91110000MA9876543Y",legalPerson:"王五",contactPhone:"13800138003",contactEmail:"info@beijing-auto.com",businessAddress:"北京市朝阳区CBD核心区",businessScope:"汽车租赁，汽车维修保养",registeredCapital:"1000",establishedDate:"2019-06-20",contactPersonName:"赵六",contactPersonPhone:"13800138004",contactPersonEmail:"zhaoliu@beijing-auto.com",username:"merchant002",status:"approved",auditReason:"资质完整，审核通过",createdAt:"2023-11-28T14:30:00Z"},{id:"3",companyName:"深圳快车租赁公司",businessLicense:"91440300MA5555666Z",legalPerson:"孙七",contactPhone:"13800138005",contactEmail:"service@shenzhen-rental.com",businessAddress:"深圳市南山区科技园",businessScope:"汽车租赁服务",registeredCapital:"300",establishedDate:"2021-03-10",contactPersonName:"周八",contactPersonPhone:"13800138006",contactPersonEmail:"zhouba@shenzhen-rental.com",username:"merchant003",status:"rejected",auditReason:"注册资本不足，营业执照信息不完整",createdAt:"2023-11-25T09:15:00Z"}])}finally{n(!1)}},i=async(h,f,p)=>{try{n(!0),await T(`/merchant/applications/${h}/audit`,{method:"PUT",body:JSON.stringify({status:f,reason:p})}),I.success("审核操作完成"),await o()}catch(c){const u=c instanceof Error?c.message:"审核操作失败";throw I.error(u),c}finally{n(!1)}};return d.useEffect(()=>{o()},[]),{merchants:e,loading:a,error:l,fetchMerchants:o,updateMerchantStatus:i}},{TextArea:Xn}=M,{Option:mt}=E,el=()=>{const{merchants:e,loading:r,updateMerchantStatus:a}=Qn(),[n,l]=d.useState(!1),[s,o]=d.useState(!1),[i,h]=d.useState(null),[f]=S.useForm(),p=[{title:"申请ID",dataIndex:"id",key:"id",width:100},{title:"企业名称",dataIndex:"companyName",key:"companyName"},{title:"法定代表人",dataIndex:"legalPerson",key:"legalPerson"},{title:"联系电话",dataIndex:"contactPhone",key:"contactPhone"},{title:"申请时间",dataIndex:"createdAt",key:"createdAt",render:v=>new Date(v).toLocaleDateString()},{title:"审核状态",dataIndex:"status",key:"status",render:v=>{const x={pending:{color:"orange",text:"待审核"},approved:{color:"green",text:"已通过"},rejected:{color:"red",text:"已拒绝"},reviewing:{color:"blue",text:"审核中"}}[v];return t(me,{color:x.color,children:x.text})}},{title:"操作",key:"action",width:200,render:(v,b)=>g(U,{size:"small",children:[t(k,{type:"link",icon:t(yt,{}),onClick:()=>c(b),children:"查看"}),b.status==="pending"&&g(Z,{children:[t(k,{type:"link",icon:t(er,{}),style:{color:"#52c41a"},onClick:()=>u(b,"approved"),children:"通过"}),t(k,{type:"link",icon:t(tr,{}),danger:!0,onClick:()=>u(b,"rejected"),children:"拒绝"})]})]})}],c=v=>{h(v),l(!0)},u=(v,b)=>{h(v),f.setFieldsValue({status:b,reason:""}),o(!0)},m=async()=>{try{const v=await f.validateFields();await a(i.id,v.status,v.reason),o(!1),h(null),f.resetFields()}catch(v){console.error("审核失败:",v)}};return g(le,{title:"商户审核",children:[t($,{title:"商户入住申请审核",children:t(oe,{columns:p,dataSource:e.map(v=>({...v,key:v.id})),loading:r,pagination:{total:e.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:v=>`共 ${v} 条记录`}})}),t(X,{title:"商户详细信息",open:n,onCancel:()=>l(!1),footer:[t(k,{onClick:()=>l(!1),children:"关闭"},"close")],width:800,children:i&&g("div",{children:[g(N,{title:"基本信息",bordered:!0,column:2,children:[t(N.Item,{label:"企业名称",span:2,children:i.companyName}),t(N.Item,{label:"统一社会信用代码",span:2,children:i.businessLicense}),t(N.Item,{label:"法定代表人",children:i.legalPerson}),t(N.Item,{label:"联系电话",children:i.contactPhone}),t(N.Item,{label:"企业邮箱",span:2,children:i.contactEmail}),t(N.Item,{label:"经营地址",span:2,children:i.businessAddress}),t(N.Item,{label:"经营范围",span:2,children:i.businessScope}),g(N.Item,{label:"注册资本",children:[i.registeredCapital,"万元"]}),t(N.Item,{label:"成立日期",children:i.establishedDate})]}),g(N,{title:"联系人信息",bordered:!0,column:2,style:{marginTop:16},children:[t(N.Item,{label:"联系人姓名",children:i.contactPersonName}),t(N.Item,{label:"联系人电话",children:i.contactPersonPhone}),t(N.Item,{label:"联系人邮箱",span:2,children:i.contactPersonEmail})]}),g(N,{title:"账户信息",bordered:!0,column:2,style:{marginTop:16},children:[t(N.Item,{label:"登录用户名",children:i.username}),t(N.Item,{label:"申请时间",children:new Date(i.createdAt).toLocaleString()}),t(N.Item,{label:"当前状态",span:2,children:t(me,{color:i.status==="pending"?"orange":i.status==="approved"?"green":"red",children:i.status==="pending"?"待审核":i.status==="approved"?"已通过":"已拒绝"})})]}),i.auditReason&&t(N,{title:"审核意见",bordered:!0,style:{marginTop:16},children:t(N.Item,{label:"审核意见",span:2,children:i.auditReason})})]})}),t(X,{title:"商户审核",open:s,onOk:m,onCancel:()=>{o(!1),f.resetFields()},okText:"确认",cancelText:"取消",children:g(S,{form:f,layout:"vertical",children:[t(S.Item,{label:"审核结果",name:"status",rules:[{required:!0,message:"请选择审核结果"}],children:g(E,{placeholder:"请选择审核结果",children:[t(mt,{value:"approved",children:"通过"}),t(mt,{value:"rejected",children:"拒绝"})]})}),t(S.Item,{label:"审核意见",name:"reason",rules:[{required:!0,message:"请输入审核意见"}],children:t(Xn,{rows:4,placeholder:"请输入审核意见（通过原因或拒绝理由）"})})]})})]})},{Title:ze,Paragraph:ft,Text:Le}=se,tl=()=>{const[e,r]=d.useState(null),[a,n]=d.useState(null),[l,s]=d.useState(""),[o,i]=d.useState(""),[h,f]=d.useState([]),p=async()=>{var m;try{console.log("正在调用门店API...");const v=await ue.getStores();console.log("门店API响应:",v),r(v),s("");let b=[];(m=v==null?void 0:v.data)!=null&&m.records&&Array.isArray(v.data.records)&&(b=v.data.records,console.log("解析的门店数据:",b),f(b))}catch(v){console.error("门店API错误:",v),s(v instanceof Error?v.message:"未知错误")}},c=async()=>{try{console.log("正在调用车辆API...");const m=await he.getVehicles();console.log("车辆API响应:",m),n(m),i("")}catch(m){console.error("车辆API错误:",m),i(m instanceof Error?m.message:"未知错误")}};d.useEffect(()=>{p(),c()},[]);const u=[{title:"ID",dataIndex:"id",key:"id"},{title:"门店名称",dataIndex:"storeName",key:"storeName"},{title:"城市",dataIndex:"city",key:"city"},{title:"地址",dataIndex:"address",key:"address"},{title:"上架状态",dataIndex:"onlineStatus",key:"onlineStatus"}];return g("div",{style:{padding:"24px"},children:[t(ze,{level:2,children:"API调试页面"}),g(U,{direction:"vertical",size:"large",style:{width:"100%"},children:[t($,{title:"门店API测试",children:g(U,{direction:"vertical",style:{width:"100%"},children:[t(k,{onClick:p,children:"重新测试门店API"}),l&&g(Le,{type:"danger",children:["错误: ",l]}),t(ze,{level:4,children:"原始响应数据:"}),t(ft,{children:t("pre",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",overflow:"auto",maxHeight:"300px"},children:e?JSON.stringify(e,null,2):"无数据"})}),h.length>0&&g(Z,{children:[t(ze,{level:4,children:"解析后的门店列表:"}),t(oe,{columns:u,dataSource:h.map(m=>({...m,key:m.id})),size:"small"})]})]})}),t($,{title:"车辆API测试",children:g(U,{direction:"vertical",style:{width:"100%"},children:[t(k,{onClick:c,children:"重新测试车辆API"}),o&&g(Le,{type:"danger",children:["错误: ",o]}),g(ft,{children:[t(Le,{strong:!0,children:"响应数据:"}),t("pre",{style:{background:"#f5f5f5",padding:"12px",borderRadius:"4px",overflow:"auto",maxHeight:"300px"},children:a?JSON.stringify(a,null,2):"无数据"})]})]})})]})]})},rl=()=>{const[e,r]=d.useState(!1),[a,n]=d.useState([]),l=s=>{console.log("调试页面接收到坐标:",s),n(s),r(!1),I.success(`成功接收到 ${s.length} 个坐标点`)};return g("div",{style:{padding:24},children:[g($,{title:"电子围栏调试页面",children:[t("p",{children:"此页面用于调试电子围栏绘制功能，排除白屏问题。"}),t(k,{type:"primary",onClick:()=>r(!0),style:{marginBottom:16},children:"打开电子围栏绘制"}),a.length>0&&g($,{title:"绘制结果",size:"small",children:[g("p",{children:["坐标点数量: ",a.length]}),t("div",{style:{maxHeight:200,overflowY:"auto"},children:a.map((s,o)=>g("div",{children:["点 ",o+1,": (",s[0].toFixed(6),", ",s[1].toFixed(6),")"]},o))})]})]}),t(Ke,{visible:e,onCancel:()=>r(!1),onFinish:l,initialCoordinates:[]})]})},al=()=>{const[e,r]=d.useState(!1),[a,n]=d.useState([]),[l,s]=d.useState([]),o=f=>{const p=new Date().toLocaleTimeString();s(c=>[...c,`[${p}] ${f}`]),console.log(`[DebugServiceAreaV2] ${f}`)},i=f=>{o(`接收到 ${f.length} 个坐标点`),n(f),r(!1),I.success(`成功接收到 ${f.length} 个坐标点`)},h=()=>{o("关闭地图模态框"),r(!1)};return g("div",{style:{padding:24},children:[g($,{title:"电子围栏调试页面 V2",children:[t("p",{children:"此页面用于详细调试电子围栏绘制功能，帮助排查双击后的问题。"}),t(k,{type:"primary",onClick:()=>{o("打开电子围栏绘制"),r(!0)},style:{marginBottom:16},children:"打开电子围栏绘制"}),t(k,{onClick:()=>s([]),style:{marginBottom:16,marginLeft:16},children:"清空日志"}),a.length>0&&g($,{title:"绘制结果",size:"small",style:{marginBottom:16},children:[g("p",{children:["坐标点数量: ",a.length]}),t("div",{style:{maxHeight:200,overflowY:"auto"},children:a.map((f,p)=>g("div",{children:["点 ",p+1,": (",f[0].toFixed(6),", ",f[1].toFixed(6),")"]},p))})]}),t($,{title:"调试日志",size:"small",children:t("div",{style:{maxHeight:300,overflowY:"auto"},children:l.length===0?t("p",{children:"暂无日志"}):l.map((f,p)=>t("div",{style:{padding:"4px 8px",borderBottom:"1px solid #f0f0f0",fontFamily:"monospace",fontSize:"12px"},children:f},p))})})]}),t(Ke,{visible:e,onCancel:h,onFinish:i,initialCoordinates:[]})]})};function nl(){return t(Sa,{children:t("div",{className:"App",children:g(va,{children:[t(V,{path:"/login",element:t(En,{})}),t(V,{path:"/register",element:t(Zn,{})}),t(V,{path:"/register-success",element:t(Gn,{})}),t(V,{path:"/debug",element:t(tl,{})}),t(V,{path:"/dashboard",element:t(de,{children:t(Nn,{})})}),t(V,{path:"/stores",element:t(de,{children:t(Ln,{})})}),t(V,{path:"/vehicles",element:t(de,{children:t(Hn,{})})}),t(V,{path:"/orders",element:t(de,{children:t(Wn,{})})}),t(V,{path:"/merchant-audit",element:t(de,{children:t(el,{})})}),t(V,{path:"/debug-service-area",element:t(rl,{})}),t(V,{path:"/debug-service-area-v2",element:t(al,{})}),t(V,{path:"/",element:t(Ht,{to:"/dashboard",replace:!0})})]})})})}je.createRoot(document.getElementById("root")).render(t(pt.StrictMode,{children:t(rr,{locale:Er,children:t(nl,{})})}));
